!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("orange")):"function"==typeof define&&define.amd?define(["orange"],t):"object"==typeof exports?exports.dom=t(require("orange")):(e.orange=e.orange||{},e.orange.dom=t(e.orange))}(this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}i(n(1)),i(n(3)),i(n(4))},function(e,t,n){"use strict";function i(e,t){return p.call(e,t)}function r(e,t,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];y.call(e,t,n,i)}function o(e,t,n){E.call(e,t,n)}function a(e,t,n,o,a){var s=e,u=function(e){var n=e.target||e.srcElement;if(!e.delegateTarget)for(;n&&n!=s;n=n.parentNode)i(n,t)&&(e.delegateTarget=n,o(e))},l=!!~L.indexOf(n);return r(e,n,u,l),x.push({eventName:n,handler:u,listener:o,selector:t}),u}function s(e,t,n,i){for(var r=x.slice(),a=0,s=r.length;a<s;a++){var u=r[a],l=!(u.eventName!==n||i&&u.listener!==i||t&&u.selector!==t);l&&(o(e,u.eventName,u.handler),x.splice(m.indexOf(r,u),1))}}function u(e,t){if(e.classList)for(var n=t.split(" "),i=0,r=n.length;i<r;i++)e.classList.contains(n[i].trim())||e.classList.add(n[i].trim());else e.className=m.unique(e.className.split(" ").concat(t.split(" "))).join(" ")}function l(e,t){if(e.classList)for(var n=t.split(" "),i=0,r=n.length;i<r;i++)e.classList.remove(n[i].trim());else for(var o=e.className.split(" "),a=t.split(" "),s=void 0,u=0,l=a.length;u<l;u++)s=o.indexOf(a[u]),~s&&(o=o.splice(s,1))}function c(e,t){if(e.classList)return e.classList.contains(t);var n=new RegExp("\b"+t);return n.test(e.className)}function f(e){if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}}function d(e,t,n,i){var a=w.transitionEnd||(w.transitionEnd=b()),s=function i(r){o(e,a,i),t.call(n,r)};r(e,a,s)}function h(e,t,n,i){var a=w.animationEnd||(w.animationEnd=k()),s=function i(r){o(e,a,i),t.call(n,r)};r(e,a,s)}function v(e,t){var n=document.createElement(e);if(t)for(var i in t)n.setAttribute(i,t[i]);return n}var m=n(2),g="undefined"!=typeof Element&&Element.prototype||{},p=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||function(e){var t=(this.parentNode||document).querySelectorAll(e)||[];return!!~m.indexOf(t,this)},y=g.addEventListener||function(e,t){return this.attachEvent("on"+e,t)},E=g.removeEventListener||function(e,t){return this.detachEvent("on"+e,t)},b=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return null},k=function(){var e=document.createElement("bootstrap"),t={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in t)if(void 0!==e.style[n])return t[n];return null};t.matches=i,t.addEventListener=r,t.removeEventListener=o;var L="focus blur change load error".split(" "),x=[];t.delegate=a,t.undelegate=s,t.addClass=u,t.removeClass=l,t.hasClass=c,t.selectionStart=f;var w={animationEnd:null,transitionEnd:null};t.transitionEnd=d,t.animationEnd=h,t.domReady=function(){var e,t=[],n=document,i=n.documentElement.doScroll,r="DOMContentLoaded",o=(i?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(r,e=function(){for(n.removeEventListener(r,e),o=!0;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}}(),t.createElement=v},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=l.exec(e);if(t)return document.createElement(t[0]);var n=document.createElement("div");n.innerHTML=e;var i=n.firstChild;return i}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(2),u=n(1),l=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,c=function(){function e(t){r(this,e),Array.isArray(t)||(t=[t]),this._elements=t||[]}return a(e,[{key:"get",value:function(e){return e=void 0===e?0:e,e>=this.length?void 0:this._elements[e]}},{key:"addClass",value:function(e){return this.forEach(function(t){u.addClass(t,e)})}},{key:"removeClass",value:function(e){return this.forEach(function(t){u.removeClass(t,e)})}},{key:"hasClass",value:function(e){return this._elements.reduce(function(t,n){return u.hasClass(n,e)},!1)}},{key:"attr",value:function e(t,n){var e=void 0;if("string"==typeof t&&n)e=i({},t,n);else if("string"==typeof t){if(this.length)return this.get(0).getAttribute(t)}else s.isObject(t)&&(e=t);return this.forEach(function(t){for(var n in e)t.setAttribute(n,e[n])})}},{key:"text",value:function(e){return 0===arguments.length?this.length>0?this.get(0).textContent:null:this.forEach(function(t){return t.textContent=e})}},{key:"html",value:function(e){return 0===arguments.length?this.length>0?this.get(0).innerHTML:null:this.forEach(function(t){return t.innerHTML=e})}},{key:"css",value:function(e,t){return 2===arguments.length?this.forEach(function(n){e in n.style&&(n.style[e]=String(t))}):this.forEach(function(t){for(var n in e)n in t.style&&(t.style[n]=String(e[n]))})}},{key:"parent",value:function(){var t=[];return this.forEach(function(e){e.parentElement&&t.push(e.parentElement)}),new e(t)}},{key:"remove",value:function(){return this.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)})}},{key:"clone",value:function(){return new e(this.map(function(e){return e.cloneNode()}))}},{key:"find",value:function(t){var n=[];return this.forEach(function(e){n=n.concat(s.slice(e.querySelectorAll(t)))}),new e(n)}},{key:"map",value:function(e){var t=new Array(this.length);return this.forEach(function(n,i){t[i]=e(n,i)}),t}},{key:"forEach",value:function(e){return this._elements.forEach(e),this}},{key:"length",get:function(){return this._elements.length}}],[{key:"query",value:function(t,n){"string"==typeof n&&(n=document.querySelectorAll(n));var i=void 0,r=void 0;if("string"==typeof t){if(t.length>0&&"<"===t[0]&&">"===t[t.length-1]&&t.length>=3)return new e([o(t)]);if(n){if(!(n instanceof HTMLElement))return i=new e(s.slice(n)),i.find(t);r=s.slice(n.querySelectorAll(t))}else r=s.slice(document.querySelectorAll(t))}else t&&t instanceof Element?r=[t]:t&&t instanceof NodeList&&(r=s.slice(t));return new e(r)}}]),e}();t.Html=c},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t,n){return new a.Promise(function(i,r){var o=new u(e,t,n);o.check(function(e){return e?r(e):void i(o.isLoaded)})})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2),s=n(1),u=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?200:arguments[1],r=arguments.length<=2||void 0===arguments[2]?10:arguments[2];i(this,e),this.img=t,this.timeout=n,this.retries=r,this.__resolved=!1}return o(e,[{key:"check",value:function(e){var t=this;this.fn=e;var n=this.getIsImageComplete();if(n)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var i=this.retries,r=function e(){setTimeout(function(){if(!t.__resolved)return t.getIsImageComplete()?(t.__resolved=!0,t.onload(null)):void(i>0&&(i--,e()))},t.timeout)};r(),s.addEventListener(this.img,"load",this),s.addEventListener(this.img,"error",this)}},{key:"confirm",value:function(e,t,n){this.__resolved=!0,this.isLoaded=e,this.fn&&this.fn(n)}},{key:"getIsImageComplete",value:function(){return this.img.complete&&void 0!==this.img.naturalWidth&&0!==this.img.naturalWidth}},{key:"handleEvent",value:function(e){var t="on"+event.type;this[t]&&this[t](event)}},{key:"onload",value:function(e){this.confirm(!0,"onload"),this.unbindEvents()}},{key:"onerror",value:function(e){this.confirm(!1,"onerror",new Error(e.error)),this.unbindEvents()}},{key:"unbindEvents",value:function(){s.removeEventListener(this.img,"load",this),s.removeEventListener(this.img,"error",this),this.fn=void 0}}]),e}();t.imageLoaded=r}])});