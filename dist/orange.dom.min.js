!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("orange")):"function"==typeof define&&define.amd?define(["orange"],t):"object"==typeof exports?exports.dom=t(require("orange")):(e.orange=e.orange||{},e.orange.dom=t(e.orange))}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(1)),r(n(3)),r(n(4))},function(e,t,n){"use strict";function r(e,t){return p.call(e,t)}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];k.call(e,t,n,r)}function o(e,t,n){b.call(e,t,n)}function a(e,t,n,o,a){var u=e,s=function(e){var n=e.target||e.srcElement;if(!e.delegateTarget)for(;n&&n!=u;n=n.parentNode)r(n,t)&&(e.delegateTarget=n,o(e))},l=!!~w.indexOf(n);return i(e,n,s,l),C.push({eventName:n,handler:s,listener:o,selector:t}),s}function u(e,t,n,r){for(var i=C.slice(),a=0,u=i.length;a<u;a++){var s=i[a],l=!(s.eventName!==n||r&&s.listener!==r||t&&s.selector!==t);l&&(o(e,s.eventName,s.handler),C.splice(y.indexOf(i,s),1))}}function s(e,t){if(e.classList)for(var n=t.split(" "),r=0,i=n.length;r<i;r++)e.classList.contains(n[r].trim())||e.classList.add(n[r].trim());else e.className=y.unique(e.className.split(" ").concat(t.split(" "))).join(" ")}function l(e,t){if(e.classList)for(var n=t.split(" "),r=0,i=n.length;r<i;r++)e.classList.remove(n[r].trim());else for(var o=e.className.split(" "),a=t.split(" "),u=void 0,s=0,l=a.length;s<l;s++)u=o.indexOf(a[s]),~u&&(o=o.splice(u,1))}function c(e,t){if(e.classList)return e.classList.contains(t);var n=new RegExp("\b"+t);return n.test(e.className)}function f(e){return e.classList?function(t){return e.classList.toggle(t)}:function(t){return c(e,t)?l(e,t):s(e,t)}}function v(e,t){for(var n=t.split(" "),r=f(e),i=0,o=n.length;i<o;i++)r(n[i])}function h(e){if("selectionStart"in e)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}}function d(e,t,n,r){var a=S.transitionEnd||(S.transitionEnd=L()),u=function r(i){o(e,a,r),t.call(n,i)};i(e,a,u)}function m(e,t,n,r){var a=S.animationEnd||(S.animationEnd=x()),u=function r(i){o(e,a,r),t.call(n,i)};i(e,a,u)}function g(e,t){var n=document.createElement(e);if(t)for(var r in t)n.setAttribute(r,t[r]);return n}var y=n(2),E="undefined"!=typeof Element&&Element.prototype||{},p=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.msMatchesSelector||E.oMatchesSelector||function(e){var t=(this.parentNode||document).querySelectorAll(e)||[];return!!~y.indexOf(t,this)},k=E.addEventListener||function(e,t){return this.attachEvent("on"+e,t)},b=E.removeEventListener||function(e,t){return this.detachEvent("on"+e,t)},L=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return null},x=function(){var e=document.createElement("bootstrap"),t={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(var n in t)if(void 0!==e.style[n])return t[n];return null};t.matches=r,t.addEventListener=i,t.removeEventListener=o;var w="focus blur change load error".split(" "),C=[];t.delegate=a,t.undelegate=u,t.addClass=s,t.removeClass=l,t.hasClass=c,t.toggleClass=v,t.selectionStart=h;var S={animationEnd:null,transitionEnd:null};t.transitionEnd=d,t.animationEnd=m,t.domReady=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i="DOMContentLoaded",o=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return o||n.addEventListener(i,e=function(){for(n.removeEventListener(i,e),o=!0;e=t.shift();)e()}),function(e){o?setTimeout(e,0):t.push(e)}}(),t.createElement=g},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=c.exec(e);if(t)return document.createElement(t[0]);var n=document.createElement("div");n.innerHTML=e;var r=n.firstChild;return r}function a(e,t){return v.query(e,t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=n(1),c=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,f=new Map,v=function(){function e(t){i(this,e),Array.isArray(t)||(t=[t]),this._elements=t||[]}return u(e,[{key:"get",value:function(e){return e=void 0===e||e<0?0:e,e>=this.length?void 0:this._elements[e]}},{key:"addClass",value:function(e){return this.forEach(function(t){l.addClass(t,e)})}},{key:"removeClass",value:function(e){return this.forEach(function(t){l.removeClass(t,e)})}},{key:"hasClass",value:function(e){return this._elements.reduce(function(t,n){return l.hasClass(n,e)},!1)}},{key:"toggleClass",value:function(e){return this.forEach(function(t){l.toggleClass(t,e)}),this}},{key:"attr",value:function e(t,n){var e=void 0;if("string"==typeof t&&n)e=r({},t,n);else if("string"==typeof t){if(this.length)return this.get(0).getAttribute(t)}else s.isObject(t)&&(e=t);return this.forEach(function(t){for(var n in e)t.setAttribute(n,e[n])})}},{key:"text",value:function(e){return 0===arguments.length?this.length>0?this.get(0).textContent:null:this.forEach(function(t){return t.textContent=e})}},{key:"html",value:function(e){return 0===arguments.length?this.length>0?this.get(0).innerHTML:null:this.forEach(function(t){return t.innerHTML=e})}},{key:"css",value:function(e,t){return 2===arguments.length?this.forEach(function(n){e in n.style&&(n.style[e]=String(t))}):this.forEach(function(t){for(var n in e)n in t.style&&(t.style[n]=String(e[n]))})}},{key:"parent",value:function(){var t=[];return this.forEach(function(e){e.parentElement&&t.push(e.parentElement)}),new e(t)}},{key:"remove",value:function(){return this.forEach(function(e){e.parentElement&&e.parentElement.removeChild(e)})}},{key:"clone",value:function(){return new e(this.map(function(e){return e.cloneNode()}))}},{key:"find",value:function(t){var n=[];return this.forEach(function(e){n=n.concat(s.slice(e.querySelectorAll(t)))}),new e(n)}},{key:"map",value:function(e){var t=new Array(this.length);return this.forEach(function(n,r){t[r]=e(n,r)}),t}},{key:"forEach",value:function(e){return this._elements.forEach(e),this}},{key:"on",value:function(e,t,n){return this.forEach(function(r){var i=f.get(r);i||(i=[],f.set(r,i)),l.addEventListener(r,e,t,n),i.push({event:e,callback:t})})}},{key:"once",value:function(e,t,n){var r=this;return this.on(e,function(n){t(n),setTimeout(function(){return r.off(e,t)})},n)}},{key:"off",value:function(e,t){return e?this.forEach(function(n){var r=f.get(n);r&&(r.forEach(function(r,i){r.event!==e||t&&t!==r.callback||f.get(n).splice(i,1)}),f.get(n).length||f.delete(n))}):this.forEach(function(e){var t=f.get(e);t&&(t.forEach(function(t){l.removeEventListener(e,t.event,t.callback)}),f.delete(e))})}},{key:"animationEnd",value:function(e,t){return this.forEach(function(n){l.animationEnd(n,e,null,t)})}},{key:"transitionEnd",value:function(e,t){return this.forEach(function(n){l.transitionEnd(n,e,null,t)})}},{key:Symbol.iterator,value:function(){var e=0,t=this._elements,n=t.length;return{next:function(){var r=e>=n;return{done:r,value:r?null:t[e++]}}}}},{key:"length",get:function(){return this._elements.length}}],[{key:"query",value:function(t,n){"string"==typeof n&&(n=document.querySelectorAll(n));var r=void 0,i=void 0;if("string"==typeof t){if(t.length>0&&"<"===t[0]&&">"===t[t.length-1]&&t.length>=3)return new e([o(t)]);if(n){if(!(n instanceof HTMLElement))return r=new e(s.slice(n)),r.find(t);i=s.slice(n.querySelectorAll(t))}else i=s.slice(document.querySelectorAll(t))}else t&&t instanceof Element?i=[t]:t&&t instanceof NodeList&&(i=s.slice(t));return new e(i)}},{key:"removeAllEventListeners",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=f.keys()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,a=f.get(o),u=!0,s=!1,c=void 0;try{for(var v,h=a[Symbol.iterator]();!(u=(v=h.next()).done);u=!0){var d=v.value;l.removeEventListener(o,d.event,d.callback)}}catch(e){s=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(s)throw c}}f.delete(o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"_domEvents",value:function(){return f}}]),e}();t.Html=v,t.html=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return new a.Promise(function(r,i){var o=new s(e,t,n);o.check(function(e){return e?i(e):void r(o.isLoaded)})})}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(2),u=n(1),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;r(this,e),this.img=t,this.timeout=n,this.retries=i,this.__resolved=!1}return o(e,[{key:"check",value:function(e){var t=this;this.fn=e;var n=this.getIsImageComplete();if(n)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var r=this.retries,i=function e(){setTimeout(function(){if(!t.__resolved)return t.img.naturalWidth>0?(t.__resolved=!0,t.onload(null)):void(r>0&&(r--,e()))},t.timeout)};i(),u.addEventListener(this.img,"load",this),u.addEventListener(this.img,"error",this)}},{key:"confirm",value:function(e,t,n){this.__resolved=!0,this.isLoaded=e,this.fn&&this.fn(n)}},{key:"getIsImageComplete",value:function(){return this.img.complete&&void 0!==this.img.naturalWidth&&0!==this.img.naturalWidth}},{key:"handleEvent",value:function(e){var t="on"+event.type;this[t]&&this[t](event)}},{key:"onload",value:function(e){this.confirm(!0,"onload"),this.unbindEvents()}},{key:"onerror",value:function(e){this.confirm(!1,"onerror",new Error(e.error)),this.unbindEvents()}},{key:"unbindEvents",value:function(){u.removeEventListener(this.img,"load",this),u.removeEventListener(this.img,"error",this),this.fn=void 0}}]),e}();t.imageLoaded=i}])});